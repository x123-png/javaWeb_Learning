
<html>
<head>
    <meta charset="utf-8">
    <title>西大网上书城</title>
    <link rel="stylesheet" href="css/bookstore.css" />
    <script>
        function getParameterByName(name) {
            var urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        function displayError() {
            var error = getParameterByName('error');
            if (error) {
                // 解码URL编码的错误信息
                var decodedError = decodeURIComponent(error.replace(/\+/g, ' '));
                document.getElementById('error-message').innerHTML = '<div style="color: red;">' + decodedError + '</div>';
            }
        }

        function refreshCaptcha() {
            document.getElementById('captcha-img').src = './captcha?' + new Date().getTime();
        }
    </script>
</head>
<body onload="displayError()">
<center>
    <br><h1>欢迎访问西大网上书城</h1><br>
    <form action="./login" method="post" style="line-height:3em">
        用户：<input type="text" name="user"><br>
        密码：<input type="password" name="password"><br>
        验证码：<input type="text" name="code"><br>
        <img id="captcha-img" src="./captcha" onclick="refreshCaptcha()" style="cursor: pointer;" title="点击刷新验证码" />
        <input type="button" value="刷新" onclick="refreshCaptcha()">
        <br>
        <input type="submit" value="登录系统">
        <div id="error-message"></div>
    </form>
</center>
</body>
</html>